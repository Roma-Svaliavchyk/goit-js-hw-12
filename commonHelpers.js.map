{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchArticles(query, currentPage) {\n  const API_KEY = '42276910-5dbc0617c597b0712888fd711';\n  const BASE_URL = 'https://pixabay.com/';\n  const END_POINT = 'api/';\n  const url = `${BASE_URL}${END_POINT}`;\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 10,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}","function hitTemplate(hit) {\n    const {\n      comments,\n      downloads,\n      views,\n      likes,\n      webformatURL,\n      tags,\n      largeImageURL,\n    } = hit;\n  \n    return `<li class=\"gallery-item\">\n               <a class=\"gallery-link\" href=\"${webformatURL}\">\n              <img class=\"gallery-image\" src=\"${largeImageURL}\" alt=\"${tags}\" />\n              </a>\n              <p><b>Likes: </b>${likes}</p>\n              <p><b>Views: </b>${views}</p>\n              <p><b>Comments: </b>${comments}</p>\n              <p><b>Downloads: </b>${downloads}</p>\n          </li>`;\n  }\n  \n  export function hitsTemplate(hits) {\n    return hits.map(hitTemplate).join('');\n  }","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchArticles } from './js/pixabay-api.js';\nimport { hitsTemplate } from './js/render-functions.js';\n\nconst refs = {\n  formElem: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nlet query;\nlet page;\nlet maxPage;\n\nrefs.formElem.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  query = e.target.elements.input.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  page = 1;\n  showLoader();\n\n  try {\n    const data = await fetchArticles(query, page);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    maxPage = Math.ceil(data.total / 10);\n\n    refs.gallery.innerHTML = '';\n    renderMarkups(data.hits);\n  } catch (err) {\n    showError(err);\n    maxPage = 0;\n    refs.gallery.innerHTML = '';\n  }\n\n  hideLoader();\n  checkBtnVisibleStatus();\n\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  showLoader();\n  const data = await fetchArticles(query, page);\n\n  renderMarkups(data.hits);\n  hideLoader();\n  checkBtnVisibleStatus();\n\n  scrollBy({\n    behavior: 'smooth',\n    top: '500',\n  });\n}\n\nfunction renderMarkups(hits) {\n  const markup = hitsTemplate(hits);\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  const lightbox = new SimpleLightbox('.gallery a', options);\n  lightbox.refresh();\n}\n\nfunction showLoadBtn() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nconst options = {\n  captions: true,\n  captionType: 'attr',\n  captionSelector: 'img',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n};"],"names":["fetchArticles","query","currentPage","API_KEY","url","params","axios","hitTemplate","hit","comments","downloads","views","likes","webformatURL","tags","largeImageURL","hitsTemplate","hits","refs","page","maxPage","onFormSubmit","onLoadMoreClick","e","iziToast","showLoader","data","renderMarkups","err","hideLoader","checkBtnVisibleStatus","markup","SimpleLightbox","options","showLoadBtn","hideLoadBtn"],"mappings":"owBAEO,eAAeA,EAAcC,EAAOC,EAAa,CACtD,MAAMC,EAAU,qCAGVC,EAAM,2BAENC,EAAS,CACb,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EAGE,OADY,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CCpBA,SAASE,EAAYC,EAAK,CACtB,KAAM,CACJ,SAAAC,EACA,UAAAC,EACA,MAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,cAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA,+CACoCK,CAAY;AAAA,gDACXE,CAAa,UAAUD,CAAI;AAAA;AAAA,iCAE1CF,CAAK;AAAA,iCACLD,CAAK;AAAA,oCACFF,CAAQ;AAAA,qCACPC,CAAS;AAAA,gBAE3C,CAEM,SAASM,EAAaC,EAAM,CACjC,OAAOA,EAAK,IAAIV,CAAW,EAAE,KAAK,EAAE,CACxC,CCfA,MAAMW,EAAO,CACX,SAAU,SAAS,cAAc,OAAO,EACxC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,gBAAgB,CACtD,EAEA,IAAIjB,EACAkB,EACAC,EAEJF,EAAK,SAAS,iBAAiB,SAAUG,CAAY,EACrDH,EAAK,YAAY,iBAAiB,QAASI,CAAe,EAE1D,eAAeD,EAAaE,EAAG,CAK7B,GAJAA,EAAE,eAAc,EAEhBtB,EAAQsB,EAAE,OAAO,SAAS,MAAM,MAAM,OAElC,CAACtB,EAAO,CACVuB,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAChB,CAAK,EACD,MACD,CAEDL,EAAO,EACPM,IAEA,GAAI,CACF,MAAMC,EAAO,MAAM1B,EAAcC,EAAOkB,CAAI,EAC5C,GAAIO,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CACDJ,EAAU,KAAK,KAAKM,EAAK,MAAQ,EAAE,EAEnCR,EAAK,QAAQ,UAAY,GACzBS,EAAcD,EAAK,IAAI,CACxB,OAAQE,EAAK,CACZ,UAAUA,CAAG,EACbR,EAAU,EACVF,EAAK,QAAQ,UAAY,EAC1B,CAEDW,IACAC,IAEAP,EAAE,OAAO,OACX,CAEA,eAAeD,GAAkB,CAC/BH,GAAQ,EACRM,IACA,MAAMC,EAAO,MAAM1B,EAAcC,EAAOkB,CAAI,EAE5CQ,EAAcD,EAAK,IAAI,EACvBG,IACAC,IAEA,SAAS,CACP,SAAU,SACV,IAAK,KACT,CAAG,CACH,CAEA,SAASH,EAAcV,EAAM,CAC3B,MAAMc,EAASf,EAAaC,CAAI,EAEhCC,EAAK,QAAQ,mBAAmB,YAAaa,CAAM,EAClC,IAAIC,EAAe,aAAcC,CAAO,EAChD,QAAO,CAClB,CAEA,SAASC,GAAc,CACrBhB,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CACA,SAASiB,GAAc,CACrBjB,EAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CAEA,SAASY,GAAwB,CAC3BX,GAAQC,EACVe,IAEAD,GAEJ,CAEA,SAAST,GAAa,CACpBP,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASW,GAAa,CACpBX,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CAEA,MAAMe,EAAU,CACd,SAAU,GACV,YAAa,OACb,gBAAiB,MACjB,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB"}